{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexd\\\\Documents\\\\Progetto-Unipa\\\\sitoBE\\\\src\\\\GestioneProprietario\\\\InserisciProp\\\\inserimentoCasaVacanza.js\";\n\n/*CSS FATTO*/\nimport React, { useState, useMemo } from \"react\";\nimport camera from \"../assets/camera.svg\";\nimport { Form, Button } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport \"./InserimentoProprietà.css\";\nimport { Redirect } from 'react-router-dom';\n\nclass InserimentoCasaVacanza extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.onSubmitInsert = e => {\n      e.preventDefault();\n      const data1 = {\n        nome_proprieta: this.state.nome_proprieta,\n        indirizzo: this.state.indirizzo,\n        localita: this.state.localita,\n        provincia: this.state.provincia,\n        tipo_proprieta: 'cv',\n        servizi: this.state.servizi,\n        ref_proprietario: this.state.ref_proprietario,\n        descrizione: this.state.descrizione\n      };\n      fetch('http://localhost:9000/insertProprieta/new', {\n        method: \"POST\",\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify(data1)\n      }).then(result => result.text()).then(result => {\n        this.setState({\n          apiResponse: JSON.parse(result)\n        });\n\n        if (this.state.apiResponse.status === 'error') {\n          this.setState({\n            error: true\n          });\n          this.setState({\n            errorMessage: this.state.apiResponse.message\n          });\n        }\n\n        const data2 = {\n          ref_proprieta_cv: this.state.apiResponse.insertId,\n          posti_letto: this.state.posti_letto,\n          tariffa_casa: this.state.tariffa_casa\n        };\n        console.log(data2);\n        fetch('http://localhost:9000/insertCV/new', {\n          method: \"POST\",\n          headers: {\n            'Content-type': 'application/json'\n          },\n          body: JSON.stringify(data2)\n        }).then(result => result.text()).then(result => {\n          this.setState({\n            apiResponse: result\n          });\n          console.log(result);\n\n          if (this.state.apiResponse.status === 'error') {\n            this.setState({\n              error: true\n            });\n            this.setState({\n              errorMessage: this.state.apiResponse.message\n            });\n          } else {\n            this.setState({\n              success: true\n            });\n          }\n        });\n      });\n    };\n\n    this.state = {\n      nome_proprieta: '',\n      indirizzo: '',\n      localita: '',\n      provincia: '',\n      tipo_proprieta: 'cv',\n      servizi: '',\n      descrizione: '',\n      ref_proprietario: localStorage.getItem('email'),\n      posti_letto: '',\n      tariffa_casa: '',\n      apiResponse: [],\n      error: false,\n      errorMessage: '',\n      success: false\n    };\n  }\n\n  render() {\n    if (!localStorage.getItem('logged') || !localStorage.getItem('proprietario')) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: \"/ErrorPage\",\n          state: {\n            error: true,\n            errorMessage: \"Utente non autorizzato\"\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 14\n        }\n      });\n    } else if (this.state.error) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: \"/ErrorPage\",\n          state: {\n            error: true,\n            errorMessage: this.state.errorMessage\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 14\n        }\n      });\n    } else if (this.state.success) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"Errore\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }\n      }, \"Inserimento avvenuto con successo!\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }\n      }, \"La tua casa vacanza \\xE8 stata registrata correttamente all'interno del sistema\"));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"background\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"containerNew\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"contentNew\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSubmitInsert,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 19\n      }\n    }, \"Compila questo form inserire la tua casa vacanza!\"), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"nome_proprieta\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 19\n      }\n    }, \"Nome\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"nome_proprieta\",\n      name: \"nome_proprieta\",\n      placeholder: \"Nome casa\",\n      onChange: this.onChange,\n      className: \"i\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"localita\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }\n    }, \"Citt\\xE0\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"localita\",\n      name: \"localita\",\n      placeholder: \"Nome citt\\xE0\",\n      onChange: this.onChange,\n      className: \"i\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"indirizzo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    }, \"Via\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"indirizzo\",\n      name: \"indirizzo\",\n      placeholder: \"Indirizzo casa\",\n      onChange: this.onChange,\n      className: \"i\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"provincia\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }\n    }, \"Provincia\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"provincia\",\n      name: \"provincia\",\n      placeholder: \"Provincia casa\",\n      onChange: this.onChange,\n      className: \"i\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"servizi\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 13\n      }\n    }, \"Servizi\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"servizi\",\n      name: \"servizi\",\n      placeholder: \"Elenco servizi\",\n      onChange: this.onChange,\n      className: \"i\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"descrizione\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 17\n      }\n    }, \"Descrizione\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"descrizione\",\n      name: \"descrizione\",\n      placeholder: \"Descrizione casa\",\n      onChange: this.onChange,\n      className: \"i\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"tariffa_casa\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 19\n      }\n    }, \"Tariffa\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      pattern: \"^\\\\d+(.\\\\d{1,2})?$\",\n      title: \"Inserire un valore numerico usando un punto per i valori decimali\",\n      id: \"tariffa_casa\",\n      name: \"tariffa_casa\",\n      placeholder: \"Tariffa casa\",\n      onChange: this.onChange,\n      className: \"i\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"posti_letto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 19\n      }\n    }, \"Posti letto\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"posti_letto\",\n      name: \"posti_letto\",\n      min: \"1\",\n      max: \"10\",\n      placeholder: \"1\",\n      onChange: this.onChange,\n      className: \"i\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Form.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 23\n      }\n    }, \"Inserisci delle foto della tua struttura\"), /*#__PURE__*/React.createElement(Form.Row, {\n      className: \"justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      className: \"inputImg\",\n      accept: \"image/*\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      className: \"inputImg\",\n      accept: \"image/*\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      className: \"inputImg\",\n      accept: \"image/*\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      className: \"inputImg\",\n      accept: \"image/*\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(Link, {\n      to: \"/InserimentoPropriet\\xE0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 19\n      }\n    }, \"Torna indietro\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 19\n      }\n    }, \"Carica\")))));\n  }\n\n}\n\nexport default InserimentoCasaVacanza;","map":{"version":3,"sources":["C:/Users/alexd/Documents/Progetto-Unipa/sitoBE/src/GestioneProprietario/InserisciProp/inserimentoCasaVacanza.js"],"names":["React","useState","useMemo","Form","Button","Link","Redirect","InserimentoCasaVacanza","Component","constructor","props","onChange","e","setState","target","name","value","onSubmitInsert","preventDefault","data1","nome_proprieta","state","indirizzo","localita","provincia","tipo_proprieta","servizi","ref_proprietario","descrizione","fetch","method","headers","body","JSON","stringify","then","result","text","apiResponse","parse","status","error","errorMessage","message","data2","ref_proprieta_cv","insertId","posti_letto","tariffa_casa","console","log","success","localStorage","getItem","render","pathname"],"mappings":"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","sourcesContent":["/*CSS FATTO*/\r\n\r\nimport React, { useState, useMemo } from \"react\";\r\nimport camera from \"../assets/camera.svg\";   \r\nimport {Form, Button} from \"react-bootstrap\"\r\nimport {Link} from \"react-router-dom\"\r\n\r\nimport \"./InserimentoProprietà.css\";\r\n\r\nimport { Redirect } from 'react-router-dom';\r\n\r\n\r\nclass InserimentoCasaVacanza extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      nome_proprieta: '',\r\n      indirizzo: '',\r\n      localita: '',\r\n      provincia: '',\r\n      tipo_proprieta: 'cv',\r\n      servizi: '',\r\n      descrizione: '',\r\n      ref_proprietario: localStorage.getItem('email'),\r\n      posti_letto:'',\r\n      tariffa_casa: '',\r\n      apiResponse: [],\r\n      error: false,\r\n      errorMessage: '',\r\n      success: false\r\n    };\r\n  }\r\n\r\n  onChange = (e) => {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n  }\r\n\r\n  onSubmitInsert = (e) => {\r\n    e.preventDefault();\r\n\r\n    const data1 = {\r\n      nome_proprieta: this.state.nome_proprieta,\r\n      indirizzo: this.state.indirizzo,\r\n      localita: this.state.localita,\r\n      provincia: this.state.provincia,\r\n      tipo_proprieta: 'cv',\r\n      servizi: this.state.servizi,\r\n      ref_proprietario: this.state.ref_proprietario,\r\n      descrizione: this.state.descrizione\r\n    }\r\n\r\n\r\n    fetch('http://localhost:9000/insertProprieta/new', {\r\n      method: \"POST\",\r\n      headers:{\r\n        'Content-type': 'application/json'\r\n      },\r\n      body: JSON.stringify(data1)\r\n    })\r\n    .then((result) => result.text())\r\n    .then((result) => {\r\n      this.setState({ apiResponse: JSON.parse(result) });\r\n\r\n      if(this.state.apiResponse.status === 'error') {\r\n        this.setState({ error: true });\r\n        this.setState({ errorMessage: this.state.apiResponse.message });\r\n      }\r\n\r\n      const data2 = {\r\n        ref_proprieta_cv: this.state.apiResponse.insertId,\r\n        posti_letto: this.state.posti_letto,\r\n        tariffa_casa : this.state.tariffa_casa\r\n      };\r\n\r\n      console.log(data2);\r\n\r\n      fetch('http://localhost:9000/insertCV/new',{\r\n        method: \"POST\",\r\n        headers: {\r\n          'Content-type': 'application/json'\r\n        },\r\n        body: JSON.stringify(data2)\r\n      })\r\n      .then((result) => result.text())\r\n      .then((result) => {\r\n        this.setState({ apiResponse: result });\r\n        console.log(result);\r\n\r\n        if(this.state.apiResponse.status === 'error') {\r\n          this.setState({ error: true });\r\n          this.setState({ errorMessage: this.state.apiResponse.message });\r\n        }\r\n        else {\r\n          this.setState({ success: true })\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if(!localStorage.getItem('logged') || !localStorage.getItem('proprietario')) {\r\n      return <Redirect\r\n          to={{\r\n              pathname: \"/ErrorPage\",\r\n              state: { \r\n                error: true,\r\n                errorMessage: \"Utente non autorizzato\" \r\n              }\r\n          }}\r\n      />\r\n    }\r\n    else if(this.state.error) {\r\n      return <Redirect \r\n        to = {{\r\n          pathname: \"/ErrorPage\",\r\n          state: {\r\n            error: true,\r\n            errorMessage: this.state.errorMessage\r\n          }\r\n        }}\r\n      />\r\n    }\r\n    else if(this.state.success) {\r\n      return (\r\n        <div className = \"Errore\">\r\n          <h1>Inserimento avvenuto con successo!</h1>\r\n          <p>La tua casa vacanza è stata registrata correttamente all'interno del sistema</p>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className = \"background\">\r\n          <div className = \"containerNew\">  \r\n              <div className = \"contentNew\">\r\n                  <form onSubmit = {this.onSubmitInsert}>\r\n                  <h2>Compila questo form inserire la tua casa vacanza!</h2>\r\n                  <label htmlFor = \"nome_proprieta\">Nome</label>\r\n            <input\r\n              type = \"text\"\r\n              id = \"nome_proprieta\"\r\n              name = \"nome_proprieta\"\r\n              placeholder = \"Nome casa\"\r\n              onChange = {this.onChange}\r\n              className = \"i\"\r\n              required\r\n            />\r\n\r\n            <label htmlFor = \"localita\">Città</label>\r\n            <input\r\n              type = \"text\"\r\n              id = \"localita\"\r\n              name = \"localita\"\r\n              placeholder = \"Nome città\"\r\n              onChange = {this.onChange}\r\n              className = \"i\"\r\n              required\r\n            />\r\n\r\n            <label htmlFor = \"indirizzo\">Via</label>\r\n            <input\r\n              type = \"text\"\r\n              id = \"indirizzo\"\r\n              name = \"indirizzo\"\r\n              placeholder= \"Indirizzo casa\"\r\n              onChange = {this.onChange}\r\n              className = \"i\"\r\n              required\r\n            />\r\n            \r\n            <label htmlFor = \"provincia\">Provincia</label>\r\n            <input\r\n              type = \"text\"\r\n              id = \"provincia\"\r\n              name = \"provincia\"\r\n              placeholder = \"Provincia casa\"\r\n              onChange = {this.onChange}\r\n              className = \"i\"\r\n              required\r\n            />\r\n\r\n            <label htmlFor = \"servizi\">Servizi</label>\r\n            <input\r\n              type = \"text\"\r\n              id = \"servizi\"\r\n              name = \"servizi\"\r\n              placeholder = \"Elenco servizi\"\r\n              onChange = {this.onChange}\r\n              className = \"i\"\r\n              required\r\n            />\r\n                <label htmlFor = \"descrizione\">Descrizione</label>\r\n            <input\r\n              type = \"text\"\r\n              id = \"descrizione\"\r\n              name = \"descrizione\"\r\n              placeholder = \"Descrizione casa\"\r\n              onChange = {this.onChange}\r\n              className = \"i\"\r\n              required\r\n            />\r\n                  <label htmlFor = \"tariffa_casa\">Tariffa</label>\r\n                  <input\r\n                      type = \"text\"\r\n                      pattern = \"^\\d+(.\\d{1,2})?$\"\r\n                      title = \"Inserire un valore numerico usando un punto per i valori decimali\"\r\n                      id = \"tariffa_casa\"\r\n                      name = \"tariffa_casa\"\r\n                      placeholder = \"Tariffa casa\"\r\n                      onChange = {this.onChange}\r\n                      className = \"i\"\r\n                  />\r\n                  <label htmlFor = \"posti_letto\">Posti letto</label>\r\n                  <input\r\n                      type = \"number\"\r\n                      id = \"posti_letto\"\r\n                      name = \"posti_letto\"\r\n                      min = \"1\"\r\n                      max = \"10\"\r\n                      placeholder = \"1\"\r\n                      onChange = {this.onChange}\r\n                      className = \"i\"\r\n                      required\r\n                  />\r\n                  <Form.Group>\r\n                      <label>Inserisci delle foto della tua struttura</label>\r\n                      <Form.Row className=\"justify-content-center\">\r\n                      <input\r\n                      type=\"file\"\r\n                      className=\"inputImg\"\r\n                      accept=\"image/*\"\r\n                      />\r\n                      <input\r\n                      type=\"file\"\r\n                      className=\"inputImg\"\r\n                      accept=\"image/*\"\r\n                      />\r\n                      <input\r\n                      type=\"file\"\r\n                      className=\"inputImg\"\r\n                      accept=\"image/*\"\r\n                      />\r\n                      <input\r\n                      type=\"file\"\r\n                      className=\"inputImg\"\r\n                      accept=\"image/*\"\r\n                      />\r\n                  </Form.Row>\r\n                  </Form.Group>\r\n                  <Link to=\"/InserimentoProprietà\">Torna indietro</Link>\r\n                  <Button variant=\"primary\" type=\"submit\">\r\n                    Carica\r\n                  </Button>\r\n                  </form>\r\n              </div>\r\n          </div>\r\n      </div>\r\n  );}\r\n}\r\n\r\nexport default InserimentoCasaVacanza;"]},"metadata":{},"sourceType":"module"}
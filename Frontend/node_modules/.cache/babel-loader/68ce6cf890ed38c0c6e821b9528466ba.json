{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexd\\\\Documents\\\\Progetto-Unipa\\\\sitoBE\\\\src\\\\GestioneProprietario\\\\Modifica\\\\ModificaStanza.js\";\n\n/*CSS FATTO*/\nimport React from \"react\";\nimport camera from \"../assets/camera.svg\";\nimport { Form } from \"react-bootstrap\";\nimport \"../InserisciProp/InserimentoProprietà.css\";\nimport { Redirect } from 'react-router-dom';\n\nclass ModificaStanza extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.onChangeImg = e => {\n      this.setState({\n        [e.target.name]: URL.createObjectURL(e.target.files[0])\n      });\n      this.setState({\n        [e.target.id]: e.target.files[0]\n      });\n    };\n\n    this.onSubmit = e => {\n      const data1 = {\n        nome_proprieta: this.state.nome_proprieta,\n        indirizzo: this.state.indirizzo,\n        localita: this.state.localita,\n        provincia: this.state.provincia,\n        tipo_proprieta: this.state.tipo_proprieta,\n        servizi: this.state.servizi,\n        ref_proprietario: this.state.ref_proprietario,\n        descrizione: this.state.descrizione,\n        id_proprieta: this.state.id_proprieta\n      };\n      fetch('http://localhost:9000/updateProprieta/fields', {\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify(data1)\n      }).then(result => {\n        result.text();\n      }).then(result => {\n        this.setState({\n          apiResponse: result\n        });\n\n        if (this.state.apiResponse && this.state.apiResponse.status === 'error') {\n          this.setState({\n            error: true,\n            errorMessage: this.state.apiResponse.message\n          });\n        } else {\n          const data2 = {\n            posti_letto: this.state.posti_letto,\n            tariffa_casa: this.state.tariffa_casa,\n            ref_proprieta_cv: this.state.ref_proprieta_cv\n          };\n          this.setState({\n            fileName1: data2.ref_proprieta_cv + \"_1.jpg\",\n            fileName2: data2.ref_proprieta_cv + \"_2.jpg\",\n            fileName3: data2.ref_proprieta_cv + \"_3.jpg\",\n            fileName4: data2.ref_proprieta_cv + \"_4.jpg\"\n          });\n          fetch('http://localhost:9000/updateCasa/fields', {\n            method: 'POST',\n            headers: {\n              'Content-type': 'application/json'\n            },\n            body: JSON.stringify(data2)\n          }).then(result => result.text()).then(result => {\n            this.setState({\n              apiResponse: result\n            });\n\n            if (this.state.apiResponse && this.state.apiResponse.status === 'error') {\n              this.setState({\n                error: true,\n                errorMessage: this.state.apiResponse.message\n              });\n            } else {\n              var form = new FormData();\n\n              if (this.state.imgCV_path1) {\n                form.append(\"foto1\", this.state.imgCV_path1, this.state.fileName1);\n              }\n\n              if (this.state.imgCV_path2) {\n                form.append(\"foto2\", this.state.imgCV_path2, this.state.fileName2);\n              }\n\n              if (this.state.imgCV_path3) {\n                form.append(\"foto3\", this.state.imgCV_path3, this.state.fileName3);\n              }\n\n              if (this.state.imgCV_path4) {\n                form.append(\"foto4\", this.state.imgCV_path4, this.state.fileName4);\n              }\n\n              fetch('http://localhost:9000/uploadFotoCV/upload', {\n                method: \"POST\",\n                body: form\n              }).then(result => result.text()).then(result => {\n                this.setState({\n                  apiResponse: result\n                });\n\n                if (this.state.apiResponse.status === 'error') {\n                  this.setState({\n                    error: true\n                  });\n                  this.setState({\n                    errorMessage: this.state.apiResponse.message\n                  });\n                } else {\n                  this.setState({\n                    success: true\n                  });\n                }\n              });\n            }\n          });\n        }\n      });\n    };\n\n    this.state = {\n      dati_stanza: this.props.history.location.state ? this.props.history.location.state.dati_stanza : '',\n      ref_bb: this.props.history.location.state ? this.props.history.location.state.dati_stanza.ref_bb : '',\n      tipologia: this.props.history.location.state ? this.props.history.location.state.dati_stanza.tipologia : '',\n      tariffa_stanza: this.props.history.location.state ? this.props.history.location.state.dati_stanza.tariffa_stanza : '',\n      imgCV_path1SRC: this.props.history.location.state ? this.props.history.location.state.dati_stanza.imgCV_path1 : '',\n      imgCV_path2SRC: this.props.history.location.state ? this.props.history.location.state.dati_stanza.imgCV_path2 : '',\n      imgCV_path3SRC: this.props.history.location.state ? this.props.history.location.state.dati_stanza.imgCV_path3 : '',\n      imgCV_path4SRC: this.props.history.location.state ? this.props.history.location.state.dati_stanza.imgCV_path4 : '',\n      imgCV_path1: null,\n      filename1: '',\n      imgCV_path2: null,\n      filename2: '',\n      imgCV_path3: null,\n      filename3: '',\n      imgCV_path4: null,\n      filename4: '',\n      apiResponse: [],\n      error: false,\n      errorMessage: '',\n      success: false\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"background\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"containerNew\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"contentNew\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }\n    }, \"Compila questo form per modificare la tua stanza!\"), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"Nome\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 13\n      }\n    }, \"Nome\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"Nome\",\n      value: Nome,\n      placeholder: \"Nome casa\",\n      onChange: e => setNome(e.target.value),\n      className: \"i\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"Servizi\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, \"Servizi\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"Servizi\",\n      value: Servizi,\n      placeholder: \"Elenco servizi\",\n      onChange: e => setServizi(e.target.value),\n      className: \"i\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"Descrizione\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }\n    }, \"Descrizione\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"Descrizione\",\n      value: Descrizione,\n      placeholder: \"Descrizione\",\n      onChange: e => setDescrizione(e.target.value),\n      className: \"i\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"Prezzo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 15\n      }\n    }, \"Prezzo\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"Prezzo\",\n      value: Prezzo,\n      placeholder: \"Prezzo\",\n      onChange: e => setPrezzo(e.target.value),\n      className: \"i\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"PostiLetto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 15\n      }\n    }, \"PostiLetto\"), /*#__PURE__*/React.createElement(Form.Control, {\n      value: PostiLetto,\n      placeholder: \"Posti letto\",\n      as: \"select\",\n      onChange: e => setPostiLetto(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 17\n      }\n    }, \"1\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }\n    }, \"2\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    }, \"3\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 17\n      }\n    }, \"4\"))), /*#__PURE__*/React.createElement(Form.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 15\n      }\n    }, \"Inserisci delle foto della tua struttura\"), /*#__PURE__*/React.createElement(Form.Row, {\n      className: \"justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      className: \"inputImg\",\n      accept: \"image/*\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      className: \"inputImg\",\n      accept: \"image/*\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      className: \"inputImg\",\n      accept: \"image/*\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      className: \"inputImg\",\n      accept: \"image/*\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 13\n      }\n    }, \"Carica\")))));\n  }\n\n}\n\nexport default ModificaStanza;","map":{"version":3,"sources":["C:/Users/alexd/Documents/Progetto-Unipa/sitoBE/src/GestioneProprietario/Modifica/ModificaStanza.js"],"names":["React","Form","Redirect","ModificaStanza","Component","constructor","props","onChange","e","setState","target","name","value","onChangeImg","URL","createObjectURL","files","id","onSubmit","data1","nome_proprieta","state","indirizzo","localita","provincia","tipo_proprieta","servizi","ref_proprietario","descrizione","id_proprieta","fetch","method","headers","body","JSON","stringify","then","result","text","apiResponse","status","error","errorMessage","message","data2","posti_letto","tariffa_casa","ref_proprieta_cv","fileName1","fileName2","fileName3","fileName4","form","FormData","imgCV_path1","append","imgCV_path2","imgCV_path3","imgCV_path4","success","dati_stanza","history","location","ref_bb","tipologia","tariffa_stanza","imgCV_path1SRC","imgCV_path2SRC","imgCV_path3SRC","imgCV_path4SRC","filename1","filename2","filename3","filename4","render","handleSubmit","Nome","setNome","Servizi","setServizi","Descrizione","setDescrizione","Prezzo","setPrezzo","PostiLetto","setPostiLetto"],"mappings":"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","sourcesContent":["/*CSS FATTO*/\r\n\r\nimport React from \"react\";\r\nimport camera from \"../assets/camera.svg\";   \r\nimport {Form} from \"react-bootstrap\"\r\n\r\nimport \"../InserisciProp/InserimentoProprietà.css\";\r\n\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nclass ModificaStanza extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      dati_stanza: this.props.history.location.state ? this.props.history.location.state.dati_stanza : '',\r\n      ref_bb: this.props.history.location.state ? this.props.history.location.state.dati_stanza.ref_bb : '',\r\n      tipologia: this.props.history.location.state ? this.props.history.location.state.dati_stanza.tipologia : '',\r\n      tariffa_stanza: this.props.history.location.state ? this.props.history.location.state.dati_stanza.tariffa_stanza : '',\r\n      imgCV_path1SRC: this.props.history.location.state ? this.props.history.location.state.dati_stanza.imgCV_path1 : '',\r\n      imgCV_path2SRC: this.props.history.location.state ? this.props.history.location.state.dati_stanza.imgCV_path2 : '',\r\n      imgCV_path3SRC: this.props.history.location.state ? this.props.history.location.state.dati_stanza.imgCV_path3 : '',\r\n      imgCV_path4SRC: this.props.history.location.state ? this.props.history.location.state.dati_stanza.imgCV_path4 : '',\r\n      imgCV_path1: null,\r\n      filename1: '',\r\n      imgCV_path2: null,\r\n      filename2: '',\r\n      imgCV_path3: null,\r\n      filename3: '',\r\n      imgCV_path4: null,\r\n      filename4: '',\r\n      apiResponse: [],\r\n      error: false,\r\n      errorMessage: '',\r\n      success: false\r\n    }\r\n  }\r\n\r\n  onChange = (e) => {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n  }\r\n\r\n  onChangeImg = (e) => {\r\n    this.setState({ [e.target.name]: URL.createObjectURL(e.target.files[0]) });\r\n    this.setState({ [e.target.id]: e.target.files[0] });\r\n  }\r\n\r\n  onSubmit = (e) => {\r\n    const data1 = {\r\n      nome_proprieta: this.state.nome_proprieta,\r\n      indirizzo: this.state.indirizzo,\r\n      localita: this.state.localita,\r\n      provincia: this.state.provincia,\r\n      tipo_proprieta: this.state.tipo_proprieta,\r\n      servizi: this.state.servizi,\r\n      ref_proprietario: this.state.ref_proprietario,\r\n      descrizione: this.state.descrizione,\r\n      id_proprieta: this.state.id_proprieta\r\n    };\r\n\r\n    fetch('http://localhost:9000/updateProprieta/fields', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-type':'application/json'\r\n        },\r\n        body: JSON.stringify(data1)\r\n    })\r\n    .then((result) => {result.text()})\r\n    .then((result) => {\r\n      this.setState({ apiResponse: result });\r\n\r\n      if(this.state.apiResponse && this.state.apiResponse.status === 'error') {\r\n        this.setState({\r\n          error: true,\r\n          errorMessage: this.state.apiResponse.message\r\n        });\r\n      }\r\n      else {\r\n        const data2 = {\r\n          posti_letto: this.state.posti_letto,\r\n          tariffa_casa: this.state.tariffa_casa,\r\n          ref_proprieta_cv: this.state.ref_proprieta_cv,\r\n        };\r\n\r\n        this.setState({\r\n          fileName1: data2.ref_proprieta_cv + \"_1.jpg\",\r\n          fileName2: data2.ref_proprieta_cv + \"_2.jpg\",\r\n          fileName3: data2.ref_proprieta_cv + \"_3.jpg\",\r\n          fileName4: data2.ref_proprieta_cv + \"_4.jpg\",\r\n        });\r\n    \r\n        fetch('http://localhost:9000/updateCasa/fields',{\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type':'application/json'\r\n            },\r\n            body: JSON.stringify(data2)\r\n        })\r\n        .then((result) => result.text())\r\n        .then((result) => {\r\n          this.setState({ apiResponse: result });\r\n    \r\n          if(this.state.apiResponse && this.state.apiResponse.status === 'error') {\r\n            this.setState({\r\n              error: true,\r\n              errorMessage: this.state.apiResponse.message\r\n            });\r\n          }\r\n          else {\r\n            var form = new FormData();\r\n            if(this.state.imgCV_path1) {\r\n              form.append(\"foto1\", this.state.imgCV_path1, this.state.fileName1);\r\n            }\r\n            if(this.state.imgCV_path2) {\r\n              form.append(\"foto2\", this.state.imgCV_path2, this.state.fileName2);\r\n            }\r\n            if(this.state.imgCV_path3) {\r\n              form.append(\"foto3\", this.state.imgCV_path3, this.state.fileName3);\r\n            }\r\n            if(this.state.imgCV_path4) {\r\n              form.append(\"foto4\", this.state.imgCV_path4, this.state.fileName4);\r\n            }\r\n\r\n            fetch('http://localhost:9000/uploadFotoCV/upload', {\r\n              method: \"POST\",\r\n              body: form\r\n            })\r\n            .then((result) => result.text())\r\n            .then((result) => {\r\n              this.setState({ apiResponse: result });\r\n\r\n            if(this.state.apiResponse.status === 'error') {\r\n              this.setState({ error: true });\r\n              this.setState({ errorMessage: this.state.apiResponse.message });\r\n            }\r\n            else {\r\n              this.setState({ success: true });\r\n            }\r\n          });\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <div className=\"background\">\r\n      <div className=\"containerNew\">  \r\n        <div className=\"contentNew\">\r\n          <form onSubmit={handleSubmit}>\r\n          <h2>Compila questo form per modificare la tua stanza!</h2>\r\n            <label htmlFor=\"Nome\">Nome</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"Nome\"\r\n              value={Nome}\r\n              placeholder=\"Nome casa\"\r\n              onChange={e => setNome(e.target.value)}\r\n              className=\"i\"\r\n            />\r\n\r\n            <label htmlFor=\"Servizi\">Servizi</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"Servizi\"\r\n              value={Servizi}\r\n              placeholder=\"Elenco servizi\"\r\n              onChange={e => setServizi(e.target.value)}\r\n              className=\"i\"\r\n            />\r\n                <label htmlFor=\"Descrizione\">Descrizione</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"Descrizione\"\r\n              value={Descrizione}\r\n              placeholder=\"Descrizione\"\r\n              onChange={e => setDescrizione(e.target.value)}\r\n              className=\"i\"\r\n            />\r\n              <label htmlFor=\"Prezzo\">Prezzo</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"Prezzo\"\r\n              value={Prezzo}\r\n              placeholder=\"Prezzo\"\r\n              onChange={e => setPrezzo(e.target.value)}\r\n              className=\"i\"\r\n            />\r\n\r\n              <Form.Group controlId=\"PostiLetto\">\r\n              <Form.Label>PostiLetto</Form.Label>\r\n              <Form.Control value={PostiLetto}  placeholder=\"Posti letto\" as=\"select\"   onChange={e => setPostiLetto(e.target.value)}  >\r\n                <option>1</option>\r\n                <option>2</option>\r\n                <option>3</option>\r\n                <option>4</option>\r\n          \r\n                </Form.Control>\r\n            </Form.Group>\r\n\r\n            <Form.Group>\r\n              <label>Inserisci delle foto della tua struttura</label>\r\n              <Form.Row className=\"justify-content-center\">\r\n              <input\r\n                type=\"file\"\r\n                className=\"inputImg\"\r\n                accept=\"image/*\"\r\n              />\r\n              <input\r\n                type=\"file\"\r\n                className=\"inputImg\"\r\n                accept=\"image/*\"\r\n              />\r\n            <input\r\n                type=\"file\"\r\n                className=\"inputImg\"\r\n                accept=\"image/*\"\r\n              />\r\n              <input\r\n                type=\"file\"\r\n                className=\"inputImg\"\r\n                accept=\"image/*\"\r\n              />\r\n              </Form.Row>\r\n              </Form.Group>\r\n            \r\n  \r\n            <button type=\"submit\" className=\"btn\">\r\n              Carica\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ModificaStanza;"]},"metadata":{},"sourceType":"module"}